"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9995],{301519:function(e,t,n){n.d(t,{Hi:function(){return d},QF:function(){return u}});var r=n(847881),o=n(419393),i=n(98276),s=n(955465),a=n(755928);function l(){let e=(0,r._)(["\n  mutation editConsumerProfileInformation(\n    $firstName: String\n    $lastName: String\n    $email: String\n    $phoneNumber: String\n    $defaultCountry: String\n    $receiveTextNotifications: Boolean\n  ) {\n    updateConsumerProfileInformation(\n      firstName: $firstName\n      lastName: $lastName\n      email: $email\n      phoneNumber: $phoneNumber\n      defaultCountry: $defaultCountry\n      receiveTextNotifications: $receiveTextNotifications\n    ) {\n      id\n      firstName\n      lastName\n      email\n      phoneNumber\n      phoneNumberComponents {\n        formattedNationalNumber\n        nationalNumber\n        formattedInternationalNumber\n        countryCode\n        internationalNumber\n        countryShortname\n      }\n      defaultCountry\n      receiveTextNotifications\n    }\n  }\n"]);return l=function(){return e},e}n(898744);let u=(0,a.gql)(l()),d=()=>{let[e]=(0,i.D)(u);return e};t.ZP=e=>{let{children:t}=e;return(0,o.jsx)(s.m,{mutation:u,children:(e,n)=>t((t,n,r,o,i,s)=>e({variables:{firstName:t,lastName:n,phoneNumber:r,email:o,defaultCountry:i,receiveTextNotifications:s}}),n)})}},426700:function(e,t,n){let r=(0,n(898744).createContext)({businessInformation:{businessId:"",businessName:"",headerImageUrl:"",coverImageUrl:"",logoUrl:"",faviconUrl:"",theme:{backgroundDefault:"",backgroundHovered:"",backgroundActive:"",toggleBackground:"",toggleBorder:"",opacity:1,isSelected:!1},loading:!0,themingOverrides:{},themingOverridesV8:{},themingOverridesParams:{},storeUrl:""},isLoading:!1,status:void 0,error:void 0,queryVariables:{businessId:null,isPreview:!1},updateBizQueryVariables:()=>null});t.Z=r},764991:function(e,t,n){var r=n(966262),o=n(858714);t.Z=()=>(0,r.useDVSBoolean)(o.P.sfGuidedSignIn,!1)},966101:function(e,t,n){n.d(t,{G:function(){return c}});var r=n(419393),o=n(898744),i=n(468874),s=n(737702),a=n(341045),l=n(628026),u=n(272310);let d=o.createContext({}),c=()=>{let e=o.useContext(d);if(null===e)throw Error("useLoyaltyInformation must be used within a LoyaltyInformationProvider");return e};t.Z=e=>{let{children:t}=e,[n,c]=o.useState((0,l.Fz)(l.hB)?(0,a.XE)((0,l.Fz)(l.hB)):{}),[m,_]=o.useState((0,s.vQ)(l.hB)?(0,a.XE)((0,s.vQ)(l.hB)):{}),f=o.useCallback(e=>{(0,l.IV)(l.hB,(0,a.cH)(e)),c(e)},[]),g=(0,i.M)(),h=o.useCallback(()=>{(0,s.pC)(l.hB,"",-1,g),(0,l.o5)(l.hB),_({})},[g]),p=n.externalIdentifier||"";return o.useEffect(()=>{!(null==n?void 0:n.membershipId)&&(null==m?void 0:m.membershipId)&&f(m)},[n,m,f]),(0,r.jsx)(d.Provider,{value:{memberNumber:p,membershipInfo:n,handleSetMembershipInfo:f,clearLoyaltyInfo:h,setShouldUpdateEmailToFalse:()=>{f({...n,shouldUpdateEmail:!1})}},children:(0,r.jsx)(u.ZP,{children:t})})}},272310:function(e,t,n){n.d(t,{Vs:function(){return s},ex:function(){return g},lj:function(){return i}});var r,o,i,s,a=n(419393),l=n(898744),u=n(628026);(r=i||(i={}))[r.OTP_SUCCESS=0]="OTP_SUCCESS",r[r.RESET_SIGNED_IN_TOAST=1]="RESET_SIGNED_IN_TOAST",r[r.PHONE_ERROR=2]="PHONE_ERROR",r[r.LOYALTY_LOGIN_TYPE=3]="LOYALTY_LOGIN_TYPE",r[r.RESET_LOYALTY_LOGIN_TYPE=4]="RESET_LOYALTY_LOGIN_TYPE",(o=s||(s={})).Missing="phone_is_missing",o.Conflict="phone_already_used",o.Update="phone_needs_update";let d={},c="sf_loyalty_ui_state",m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return(0,u.Fz)(c)||e},_=l.createContext({}),f=(e,t)=>{switch(t.type){case 0:return{...e,signedInToasterText:t.payload};case 1:return{...e,signedInToasterText:""};case 2:return{...e,phoneError:t.payload};case 4:return{...e,loyaltyLoginType:""};default:return e}},g=()=>{let e=l.useContext(_);if(null===e)throw Error("useLoyaltyUiState must be used within a LoyaltyInformationProvider");return e};t.ZP=e=>{let{children:t}=e,[n,r]=l.useReducer(f,d,m);l.useEffect(()=>{(0,u.IV)(c,JSON.stringify(n))},[n]);let o=l.useMemo(()=>({loyaltyUiState:n,loyaltyUiDispatch:r}),[n,r]);return(0,a.jsx)(_.Provider,{value:o,children:t})}},808959:function(e,t,n){var r=n(578601);t.Z=()=>{let e=(0,r.Qd)();return e.isInternalLoyalty?{...e,programId:e.programId}:{...e,programId:""}}},765770:function(e,t,n){n.d(t,{R:function(){return a},V:function(){return l}});var r=n(419393),o=n(898744);let i=o.createContext({});var s=n(185985);let a=e=>{let{children:t}=e,[n,o]=(0,s.Z)();return(0,r.jsx)(i.Provider,{value:{state:n,dispatch:o},children:t})},l=()=>{let e=o.useContext(i);if(null===e)throw Error("useMenuPageLayoutContext must be used within a MenuPageLayoutContextProvider");return e}},185985:function(e,t,n){n.d(t,{Z:function(){return a},r:function(){return r}});var r,o=n(898744);(r||(r={})).StickyFooter="StickyFooter";let i={stickyFooter:{isShown:!1,margin:{heightAdjustment:0}}},s=(e,t)=>"StickyFooter"===t.type?{...e,stickyFooter:{...t.data}}:e;function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.useReducer(s,{...i,...e})}},248057:function(e,t,n){n.d(t,{G:function(){return i},U:function(){return o}});var r=n(839637);let o=()=>!!(0,r.UO)().preview,i=()=>!!(0,r.UO)().activationPreview},262189:function(e,t,n){n.r(t),n.d(t,{STEPS:function(){return s},default:function(){return eZ}});var r,o,i,s,a=n(419393),l=n(898744),u=n(226399),d=n(500057),c=n(537750),m=n(847881),_=n(755928),f=n(98276);function g(){let e=(0,m._)(["\n  mutation initiateStorefrontLoginV2(\n    $tenantId: String!\n    $businessId: ID!\n    $storeId: ID!\n    $email: String\n    $phone: String\n    $clientId: String\n    $discardDDSearchResult: Boolean\n  ) {\n    initiateStorefrontLoginV2(\n      tenantId: $tenantId\n      businessId: $businessId\n      storeId: $storeId\n      email: $email\n      phone: $phone\n      clientId: $clientId\n      discardDDSearchResult: $discardDDSearchResult\n    ) {\n      loginType\n      phone\n      email\n      isDashPassUser\n    }\n  }\n"]);return g=function(){return e},e}let h=(0,_.gql)(g()),p=()=>(0,f.D)(h);var x=n(618043);let v={initiateStorefrontLoginV2:{__typename:"StorefrontLoginResultV2",loginType:u.BzC.NONE,phone:"",email:"",isDashPassUser:!1}},b=()=>{let{storeInformation:{tenantId:e="",storeId:t="",businessId:n=""}}=(0,c.TX)(),r=(0,x.n)(),[o,i]=p(),s=(0,l.useCallback)(i=>{let{email:s,phone:a}=i,l={businessId:n,clientId:r,email:null==s?void 0:s.toLocaleLowerCase(),phone:a,storeId:null==t?void 0:t.toString(),tenantId:e,discardDDSearchResult:!0};return a&&e?o({variables:l}).then(e=>{var t;if(null==e?void 0:null===(t=e.errors)||void 0===t?void 0:t.length)throw Error(null==e?void 0:e.errors[0].message);return e}).catch(e=>({data:{...v,error:e}})):Promise.resolve({data:v})},[n,r,t,e,o]);return t&&e&&n?{sendOTP:s,result:i}:{sendOTP:()=>Promise.reject(0),result:i}};var C=n(953604),y=n(290199),S=n(439467),P=n(217151),Z=n(337534),I=n(19269),j=n(651537),N=n(788571),w=n(111218),k=n(969425),E=n(153361),L=n(826893),T=n(445219),O=n(307578),U=n(420119),A=n(332959),B=n(871079),R=n(237879),$=e=>{let{onBack:t,onClose:n,hasBackButton:r,title:o,subtitle:i,banner:s}=e;return(0,a.jsxs)(y.Z,{size:P.wM.xSmall,style:{paddingBottom:"0"},children:[(0,a.jsxs)(A.Z,{size:P.$f.none,alignItems:B.v2.center,justifyContent:B.dy.spaceBetween,children:[r&&(0,a.jsx)(O.Z,{iconType:U.L.ArrowLeft,accessibilityLabel:d.ZP.t("storefront_user_mgmt_go_back"),onClick:t}),(0,a.jsx)(O.Z,{iconType:U.L.Close,accessibilityLabel:d.ZP.t("storefront_user_mgmt_go_back"),onClick:n})]}),(0,a.jsx)(y.Z,{size:P.wM.xSmall,style:{paddingTop:"0"},children:(0,a.jsx)(Z.x,{textStyle:I.pn.display.medium,textAlign:R.H.left,children:o})}),!!s&&(0,a.jsx)(y.Z,{size:P.wM.xSmall,children:s}),(0,a.jsx)(y.Z,{size:P.wM.xSmall,children:(0,a.jsx)(Z.x,{textStyle:I.pn.label.medium.default,textAlign:R.H.left,children:i})})]})};let Q=e=>{let{children:t,title:n,subtitle:r,banner:o,onClose:i=()=>0,onBack:s=()=>0,onContinue:l=()=>0,hasContinueButton:u,renderFooterContent:d,hasBackButton:c=!1,continueButtonDisable:m=!1,isLoading:_=!1}=e,f=u?{text:"Continue",onClick:l,buttonProps:{type:E.ButtonType.Primary,isInline:!0,isDisabled:m||_}}:void 0,g=_?"":n;return(0,a.jsx)(T.Modal,{title:"","data-testid":"OtpModal",hasCloseButton:!1,headerAlignment:T.ModalHeaderAlignment.Left,primaryAction:f,renderContentHeader:()=>(0,a.jsx)($,{onBack:s,onClose:i,hasBackButton:c,title:g,subtitle:r,banner:o}),renderFooterContent:d,hasContentPadding:!1,shouldCloseOnEscapePress:!0,shouldCloseOnOverlayClick:!0,useHairlineDividers:!1,children:_?(0,a.jsx)(L.g,{}):t})};Q.defaultProps={hasContinueButton:!0,hasBackButton:!1,continueButtonDisable:!1,isLoading:!1,onBack:void 0,children:void 0,onContinue:void 0,renderFooterContent:void 0,subtitle:""};var F=n(19220),D=n(738979),z=n(488455),M=n(385710);let V=(0,z.default)(F.Z).attrs(()=>({size:U.qE.small,type:D.L$.link})).withConfig({componentId:"sc-4e310d10-0"})([""]),G=(0,z.default)(Z.x).withConfig({componentId:"sc-4e310d10-1"})(["margin-top:"," !important;"],M.Q2.usage.space.xSmall),H=e=>{var t,n,r,o,i,s;return(null==e?void 0:null===(t=e.number)||void 0===t?void 0:t.nationalNumber)!==void 0&&((null==e?void 0:null===(n=e.number)||void 0===n?void 0:n.country)==="AU"&&(null==e?void 0:null===(o=e.number)||void 0===o?void 0:null===(r=o.nationalNumber)||void 0===r?void 0:r.length)>=9||(null==e?void 0:null===(s=e.number)||void 0===s?void 0:null===(i=s.nationalNumber)||void 0===i?void 0:i.length)>=10)};function Y(e){let t=e.replace(/\D/g,"");return t.length<9?"":"xxx-"+t.slice(-4)}let q={number:{number:"",country:"US",nationalNumber:"",countryCallingCode:""},template:""},X=e=>{var t,n;let{phone:r,onClose:o,onContinue:i,error:s,setError:u,isLoading:c}=e,m=(0,N.Z)(),[_,f]=l.useState(r),[g,h]=l.useState((null==_?void 0:null===(t=_.number)||void 0===t?void 0:t.country)||"US"),p=m?d.ZP.t("storefront_firstTimePromo_signIn_title"):d.ZP.t("storefront_auto_detect_enter_phone_title"),x=d.ZP.t("storefront_auto_detect_enter_phone_subtitle"),v=d.ZP.t("storefront_auto_detect_enter_phone_input_title"),b=d.ZP.t("storefront_auto_detect_enter_phone_subtext");return(0,a.jsx)(Q,{onClose:o,onContinue:()=>i(_),title:p,subtitle:x,hasBackButton:!1,hasContinueButton:!0,continueButtonDisable:!_,isLoading:c,children:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(y.Z,{children:(0,a.jsxs)(S.Z,{size:P.Uo.large,children:[(0,a.jsxs)(S.Z,{size:P.Uo.xSmall,children:[(0,a.jsx)(Z.x,{textStyle:I.pn.body.medium.strong,children:v}),(0,a.jsx)(j.Z,{isLabelHidden:!0,"data-testid":"login-phone-field",availableCountries:Object.values(w.nR),name:"phone",value:null==_?void 0:null===(n=_.number)||void 0===n?void 0:n.nationalNumber,onChange:(e,t)=>{H(t)?(f(t),u(void 0)):f(q)},onCountryChange:e=>{h(e),(null==_?void 0:_.number)&&(_.number.country=e,f({..._}))},currentCountry:g,placeholder:(0,k.Yq)(g),label:d.ZP.t("profilePageStrings_phoneNumber"),isRequired:!0,isInternationalEnabled:!0,countryLabel:d.ZP.t("profilePageStrings_countries_country"),error:s})]}),(0,a.jsx)(G,{textStyle:I.pn.body.small.default,color:I.d9.text.subdued.default,children:b})]})})})})};X.defaultProps={phone:q,onClose:()=>{},onContinue:()=>{},error:void 0,isLoading:!1};var J=n(78999),K=n.n(J),W=n(80291),ee=n(628026),et=n(336255),en=n(477074);let er=e=>{let{error:t,isLoading:n,onResend:r,onValidCode:o,setError:i,loginType:s,onAuthSuccess:u}=e,c=(0,C.f)(),[m,_]=l.useState(""),{isMobile:f}=(0,en.ac)(),g=async e=>{let t=e.trim(),n=6===t.length&&!t.includes(" ");_(t),n&&(c("cx_storefront_auto_submit_code",{loginType:s}),c("track_click_otp_confirm",{loginType:s}),await o(t)?null==u||u():_(""))},h=async()=>{_(""),i(null),c("track_click_otp_resned_code"),c("cx_storefront_send_otp");try{await r(),c("cx_storefront_send_otp_success")}catch(t){let e=(0,ee.he)(t);c("cx_storefront_send_otp_error",{error:t.message,parsedError:e.message}),i(e)}},p=(0,a.jsx)(V,{"data-testid":"otp-resend-button",isInline:!0,isDisabled:n,onClick:h,children:d.ZP.t("storefront_resend_button_title")}),x=(null==t?void 0:t.message)||"";return(0,a.jsxs)(S.Z,{size:P.Uo.xLarge,children:[n?(0,a.jsx)(L.g,{"data-testid":"passcode-loading"}):(0,a.jsx)(et.Z,{autoFocus:!f,label:d.ZP.t("storefront_user_mgmt_passcode_label"),value:m,numChars:6,onChange:g,hasError:!!x,errorMessage:x}),p]})};er.defaultProps={error:null,isLoading:!1,setError:()=>{},loginType:u.BzC.NONE};var eo=n(532408),ei=n(380905),es=function(e){let{authUser:t,result:n}=(0,ei.A)(),[r,o]=l.useState(),i=(0,C.f)();return{handleAuthUser:l.useCallback(async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,s={phoneNumber:r,code:n,method:u.BzC.STOREFRONT};i("cx_storefront_login_attempt_verify_with_code",{...s});try{var a,l,d;let u=await t(r,n);i("cx_storefront_login_attempt_success",{...s,userId:null==u?void 0:null===(d=u.data)||void 0===d?void 0:null===(l=d.authenticateStorefrontUser)||void 0===l?void 0:null===(a=l.userInfo)||void 0===a?void 0:a.id}),o(null),null==e||e()}catch(t){let e=(0,ee.he)(t,!0);return o(e),i("cx_storefront_login_attempt_error",{...s,parsedError:e.message,error:null==t?void 0:t.message}),!1}return!0},[t]),loading:n.loading,error:r,setError:o}},ea=n(321845);function el(e){let{phoneNumber:t,sendOTPOnLoad:n,onAuthSuccess:r,loginMode:o,firstName:i,lastName:s,email:d}=e,c=(0,C.f)(),m=0===o,{handleAuthUser:_,error:f,setError:g,loading:h}=es(r),{sendOTP:p,result:x}=(0,eo.V)(),{verifyAndRegister:v,result:{loading:b}}=(0,ea.P)({first:i,last:s,email:d,phone:t}),[y,S]=l.useState(),P=m?S:g;l.useEffect(()=>{p&&n&&p(t).catch(e=>{P((0,ee.he)(e))})},[]);let Z=async e=>{try{return S(null),await v(e),c("cx_storefront_signup_success",{createMode:!1}),!0}catch(t){let e=(0,ee.he)(t);return c("cx_storefront_signup_failure",{error:t.message,parsedError:e.message,createMode:!1}),S(e),!1}},I=async e=>m?await Z(e):1===o&&await _(e,t),j=(m?b:h)||(null==x?void 0:x.loading);return(0,a.jsx)(er,{error:m?y:f,isLoading:j,onResend:()=>p(t).catch(e=>{P((0,ee.he)(e))}),onValidCode:I,setError:P,loginType:u.BzC.STOREFRONT,onAuthSuccess:r})}(r=i||(i={}))[r.SIGN_UP=0]="SIGN_UP",r[r.SIGN_IN=1]="SIGN_IN",el.defaultProps={sendOTPOnLoad:!0,onAuthSuccess:()=>{},firstName:"",lastName:"",email:""};let eu=e=>{var t;let{phone:n,onClose:r,onBack:o}=e,s=l.useMemo(()=>({i18nextInstance:d.ZP.instance}),[]),{consumer:u}=(0,W.R)(),c=null!==(t=null==u?void 0:u.firstName)&&void 0!==t?t:"",m=(0,N.Z)(),_=m?(0,a.jsx)(K(),{i18n:s,i18nKey:"storefront_firstTimePromo_signIn_verify_title",values:{firstName:c},components:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{style:c?{}:{display:"none"}})]}):d.ZP.t("storefront_auto_detect_signin_otp_title"),f=Y((null==u?void 0:u.phoneNumber)||n.number.number)||"your phone",g=m?d.ZP.t("storefront_firstTimePromo_signIn_verify_subTitle",{lastFour:f}):d.ZP.t("storefront_auto_detect_signin_otp_subtitle",{maskedPhone:f});return(0,a.jsx)(Q,{onClose:r,title:_,hasBackButton:!0,hasContinueButton:!1,onBack:o,isLoading:!1,subtitle:g,children:(0,a.jsx)(y.Z,{children:(0,a.jsx)(el,{phoneNumber:n.number.number,sendOTPOnLoad:!1,loginMode:i.SIGN_IN,onAuthSuccess:r})})})};eu.defaultProps={phone:{number:{number:"",country:"US",nationalNumber:"",countryCallingCode:""},template:""},onClose:()=>{}};var ed=n(708723),ec=n(172419),em=n(439758),e_=n(188095),ef=n(377814),eg=n(392154),eh=n(295052),ep=n(381509),ex=e=>{let{firstName:t,lastName:n,email:r,setFirstName:o,setLastName:i,setEmail:s}=e;return(0,a.jsxs)(S.Z,{"data-anchor-id":ep.StorefrontAnchors.ContactInfoPanel,size:P.Uo.large,children:[(0,a.jsxs)(A.Z,{"data-anchor-id":ep.StorefrontAnchors.NameRow,children:[(0,a.jsx)(eg.Z,{label:d.ZP.t("profilePageStrings_firstName"),onChange:e=>{(0,ee.IV)(ee.ul,e),o(e)},value:t,placeholder:d.ZP.t("menu_enterFirstName"),isRequired:!0}),(0,a.jsx)(eg.Z,{label:d.ZP.t("profilePageStrings_lastName"),onChange:e=>{(0,ee.IV)(ee.ke,e),i(e)},value:n,placeholder:d.ZP.t("menu_enterLastName"),isRequired:!0})]}),(0,a.jsx)(eh.Z,{"data-anchor-id":ep.StorefrontAnchors.Email,label:d.ZP.t("profilePageStrings_email"),value:r,placeholder:d.ZP.t("menu_enterEmail"),onChange:e=>{s(e),(0,ee.I4)(e)},isRequired:!0})]})},ev=e=>{var t,n;let{onClose:r,handleBackButtonClick:o,handleNextButtonClick:i,firstName:s,lastName:u,email:c,handleFirstNameChange:m,handleLastNameChange:_,handleEmailChange:f}=e,g=l.useMemo(()=>({i18nextInstance:d.ZP.instance}),[]),{consumer:h}=(0,W.R)(),p=null!==(n=null==h?void 0:null===(t=h.orderCart)||void 0===t?void 0:t.subtotal)&&void 0!==n?n:0,x=(0,N.Z)(),v=(0,C.f)();(0,ec.q)(()=>v("cx_storefront_show_create_account_modal"));let b=!s||!u||!(0,ed.vV)(c),S=x?d.ZP.t("storefront_firstTimePromo_signUp_title"):d.ZP.t("storefront_auto_detect_signup_modal_title"),P=x?d.ZP.t("storefront_firstTimePromo_signUp_subTitle"):d.ZP.t("storefront_auto_detect_signup_modal_subtitle"),I=(0,ef.j8)(),{discountAmountString:j,minOrderAmountString:w}=(0,ef.gV)({minOrderAmount:em.Ns,discountAmount:em.SR,orderCartSubtotal:p,formattingOptions:I}),k=x?(0,a.jsx)(e_.Ux,{children:(0,a.jsx)(Z.x,{children:(0,a.jsx)(K(),{i18n:g,i18nKey:"storefront_firstTimePromo_banner_message_logged_out",values:{discountAmount:j,minOrderAmount:w},components:[(0,a.jsx)("strong",{}),(0,a.jsx)("strong",{})]})})}):null;return(0,a.jsx)(Q,{title:S,onClose:r,onContinue:()=>{v("cx_storefront_create_account_modal_click_next"),i()},onBack:()=>{v("cx_storefront_create_account_modal_click_back"),o()},hasContinueButton:!0,hasBackButton:!0,isLoading:!1,continueButtonDisable:b,subtitle:P,banner:k,children:(0,a.jsx)(y.Z,{children:(0,a.jsx)(ex,{firstName:s,lastName:u,email:c,setFirstName:m,setLastName:_,setEmail:f})})})},eb=n(327601),eC=n(378740),ey=n(325679);let eS=e=>{let{phone:t,onClose:n,onBack:r,firstName:o,lastName:s,email:u}=e,m=(0,N.Z)(),{consumer:_}=(0,W.R)(),f=m?d.ZP.t("storefront_firstTimePromo_signUp_verify_title",{firstName:o}):d.ZP.t("storefront_auto_detect_signup_otp_title",{firstName:o}),g=d.ZP.t("storefront_auto_detect_otp_masked_phone_alt"),h=Y((null==_?void 0:_.phoneNumber)||t.number.number)||g,p=m?d.ZP.t("storefront_firstTimePromo_signUp_verify_subTitle",{lastFour:h}):d.ZP.t("storefront_auto_detect_signup_otp_subtitle",{maskedPhone:h}),{storeInformation:x}=l.useContext(c.ZP),v=(0,eb.bU)(),{privacy:b,terms:C}=(0,eC.N9)({storeInformation:x,locale:v});return(0,a.jsx)(Q,{renderFooterContent:()=>(0,a.jsxs)(Z.x,{children:[d.ZP.t("menu_byCreatingAnAccountYou"),(0,a.jsx)(ey.Dz,{href:C,target:"_blank",children:d.ZP.t("checkoutStrings_orderCart_terms")}),d.ZP.t("checkoutStrings_orderCart_and"),(0,a.jsx)(ey.Dz,{href:b,target:"_blank",children:d.ZP.t("checkoutStrings_orderCart_privacyStatement")})]}),onClose:n,title:f,hasBackButton:!0,hasContinueButton:!1,onBack:r,isLoading:!1,subtitle:p,children:(0,a.jsx)(y.Z,{children:(0,a.jsx)(el,{phoneNumber:t.number.number,sendOTPOnLoad:!0,loginMode:i.SIGN_UP,firstName:o,lastName:s,email:u,onAuthSuccess:n})})})};eS.defaultProps={phone:{number:{number:"",country:"US",nationalNumber:"",countryCallingCode:""},template:""},onClose:()=>{}},(o=s||(s={}))[o.ENTER_PHONE=0]="ENTER_PHONE",o[o.CREATE_ACCOUNT=1]="CREATE_ACCOUNT",o[o.VERIFY_CODE_FOR_SIGN_IN=2]="VERIFY_CODE_FOR_SIGN_IN",o[o.VERIFY_CODE_FOR_SIGN_UP=3]="VERIFY_CODE_FOR_SIGN_UP";let eP={number:{number:"",country:"US",nationalNumber:"",countryCallingCode:""},template:""};var eZ=e=>{var t;let{onClose:n}=e,[r,o]=l.useState(0),[i,s]=l.useState(eP),[c,m]=l.useState(""),[_,f]=l.useState(""),[g,h]=l.useState(""),[p,x]=l.useState(),v=(0,C.f)(),y=null==i?void 0:null===(t=i.number)||void 0===t?void 0:t.number,S=l.useCallback(()=>{o(3),v("cx_storefront_create_account_modal_click_next",{phoneNumber:y})},[v,y]),{sendOTP:P}=b(),Z=l.useCallback(e=>{var t;let n=null==e?void 0:null===(t=e.number)||void 0===t?void 0:t.number;n?(s(e),P({phone:n}).then(e=>{var t;let{data:n}=e;(null==n?void 0:null===(t=n.initiateStorefrontLoginV2)||void 0===t?void 0:t.loginType)===u.BzC.NONE?(v("cx_storefront_show_signup_verification_modal"),o(1)):(v("cx_storefront_login_attempt_show_verify_code",{phoneNumber:y}),o(2)),x(void 0)})):x(d.ZP.t("storefront_login_error_empty_phone_number"))},[P,v,y]),I=l.useCallback(()=>{v("cx_storefront_login_change_phone"),o(0)},[v]);switch(r){case 2:return(0,a.jsx)(eu,{phone:i,onClose:n,onBack:I});case 3:return(0,a.jsx)(eS,{phone:i,onClose:n,onBack:()=>o(1),firstName:c,lastName:_,email:g});case 1:return(0,a.jsx)(ev,{onClose:n,handleBackButtonClick:I,handleNextButtonClick:S,handleFirstNameChange:m,handleLastNameChange:f,handleEmailChange:h,firstName:c,lastName:_,email:g});default:return(0,a.jsx)(X,{phone:i,onClose:n,onContinue:Z,error:p,setError:x,isLoading:!1})}}},336255:function(e,t,n){var r=n(419393),o=n(898744),i=n(500057),s=n(153095),a=n(439467),l=n(332959),u=n(217151),d=n(871079),c=n(290199),m=n(637442),_=n(157890),f=n(385710),g=n(575465),h=n(337534),p=n(19269);t.Z=e=>{let{autoFocus:t=!0,numChars:n=4,type:x="number",hasError:v,errorMessage:b,value:C="",label:y,onChange:S=()=>0}=e,P=o.useRef([]),Z=e=>{e.focus(),e.select()},I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",r=C.split("");if(t.length>1?r.splice(e,t.length,...t.split("")):r[e]=t||" ",t.trim()&&P.current&&e<n-1){let r=Math.min(e+t.length,n-1);Z(P.current[r])}S(r.join(""))},j=(e,t)=>{let{key:r}=t,o=e>0?e-1:0;switch(r){case"ArrowRight":let i=(e+1)%n;return Z(P.current[i]);case"Backspace":let s=C.split("");return s[e]=" ",S(s.join("")),Z(P.current[o]);case"ArrowLeft":return Z(P.current[o])}},N=i.ZP.t("storefront_user_mgmt_passcode_digit");return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(l.Z,{"data-testid":"OtpInputs",size:u.O8.xSmall,children:[...Array(n)].map((e,n)=>(0,r.jsx)(s.i$,{hasError:v,children:(0,r.jsx)(s.Nw,{type:x,min:0,max:0===n?Number.MAX_VALUE:9,maxLength:1,value:C[n]||"",autoComplete:"off",onChange:e=>{var t;return I(n,null===(t=e.target)||void 0===t?void 0:t.value)},onKeyUp:e=>j(n,e),"aria-label":"".concat(y," ").concat(N," ").concat(n+1),ref:e=>{P.current&&e&&(P.current[n]=e)},autoFocus:t&&0===n,onClick:e=>{e.target.value&&e.target.select()},hasError:v})},"".concat(n)))}),v&&b&&(0,r.jsxs)(l.Z,{size:u.O8.xxSmall,alignItems:d.v2.flexStart,children:[(0,r.jsx)(c.Z,{horizontalSize:u.wM.xxSmall,verticalSize:u.wM.xxSmall,children:(0,r.jsx)(m.Z,{type:_.IconType.WarningCircleFill,color:f.Q2.usage.color.negative.default,size:g.J.small})}),(0,r.jsx)(h.x,{textStyle:p.pn.label.small.strong,color:f.Q2.usage.color.negative.default,children:b})]})]})}},939468:function(e,t,n){n.d(t,{Z:function(){return C}});var r,o,i=n(419393),s=n(898744),a=n(500057),l=n(651537),u=n(674693),d=n(145476),c=n(111218),m=n(969425),_=n(832077),f=n(364534),g=n(290199),h=n(439467),p=n(337534),x=e=>{var t,n;let{phone:r={number:{number:"",country:"US",nationalNumber:"",countryCallingCode:""},template:""},showSignUpInFooter:o=!1,onClose:x=()=>0,onPrimaryActionClick:v=()=>0,onSuccess:b=()=>0,setShowSignUp:C=()=>0,error:y}=e,S=a.ZP.t("storefront_signin_enter_phone_details",{passCodeLength:f.z}),[P,Z]=s.useState(r),[I,j]=s.useState((null==P?void 0:null===(t=P.number)||void 0===t?void 0:t.country)||"US"),N=a.ZP.t("storefront_signin_title"),w=a.ZP.t("storefront_signing_next");return(0,i.jsx)(_.Z,{title:N,hasCloseButton:!0,buttonTitle:w,onClose:x,onSuccess:()=>{b()},onPrimaryActionClick:()=>v(P),buttonDisabled:!P,setShowSignUp:C,showSignUpInFooter:o,children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.Z,{children:(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(p.x,{children:S}),(0,i.jsx)(l.Z,{"data-testid":"login-phone-field",availableCountries:Object.values(c.nR),value:null==P?void 0:null===(n=P.number)||void 0===n?void 0:n.nationalNumber,onChange:(e,t)=>{var n,r,o,i,s,a;(null==t?void 0:null===(n=t.number)||void 0===n?void 0:n.nationalNumber)!==void 0&&((null==t?void 0:null===(r=t.number)||void 0===r?void 0:r.country)==="AU"&&(null==t?void 0:null===(i=t.number)||void 0===i?void 0:null===(o=i.nationalNumber)||void 0===o?void 0:o.length)>=9||(null==t?void 0:null===(a=t.number)||void 0===a?void 0:null===(s=a.nationalNumber)||void 0===s?void 0:s.length)>=10)&&Z(t)},onCountryChange:e=>{j(e),(null==P?void 0:P.number)&&(P.number.country=e,Z({...P}))},currentCountry:I,placeholder:(0,m.Yq)(I),label:a.ZP.t("profilePageStrings_phoneNumber"),isRequired:!0,isInternationalEnabled:!0,countryLabel:a.ZP.t("profilePageStrings_countries_country"),error:y})]})}),(0,i.jsx)(u.Z,{type:d.C.fullBorder})]})})},v=n(164778),b=n(953604);(r=o||(o={}))[r.ENTER_PHONE=0]="ENTER_PHONE",r[r.VERIFY_CODE=1]="VERIFY_CODE";var C=e=>{var t;let{onClose:n,setShowSignUp:r}=e,o=!!r,[l,u]=s.useState(0),[d,c]=s.useState(),[m,_]=s.useState(),g=(0,b.f)(),h=null==d?void 0:null===(t=d.number)||void 0===t?void 0:t.number,p=s.useCallback(e=>{var t;(null==e?void 0:null===(t=e.number)||void 0===t?void 0:t.number)?(c(e),u(1),g("cx_storefront_login_attempt_show_verify_code",{phoneNumber:h})):_(a.ZP.t("storefront_login_error_empty_phone_number"))},[g,h]),C=s.useCallback(e=>{e(null),g("cx_storefront_login_change_phone"),u(0)},[g]);return 1===l?(0,i.jsx)(v.Z,{onClose:n,children:e=>{var t;let{handleClose:n,handleAuthenticate:s,setError:a,pending:l,error:u}=e;return(0,i.jsx)(f.Z,{onClose:n,sendOTPOnLoad:!0,onBack:()=>C(a),onPrimaryActionClick:s,phone:null==d?void 0:null===(t=d.number)||void 0===t?void 0:t.number,error:null==u?void 0:u.message,showContinueAsGuest:!0,isLoading:l,showSignUp:o,setShowSignUp:r})}}):(0,i.jsx)(v.Z,{onClose:n,children:e=>{var t;let{handleClose:n}=e;return(0,i.jsx)(x,{country:null==d?void 0:null===(t=d.number)||void 0===t?void 0:t.country,error:m,onClose:n,onPrimaryActionClick:p,phone:d,setShowSignUp:r,showSignUpInFooter:o})}})}},164778:function(e,t,n){var r=n(419393),o=n(898744),i=n(380905),s=n(953604),a=n(628026);t.Z=e=>{let{onClose:t,onSuccess:n,children:l}=e,[u,d]=o.useState(!1),[c,m]=o.useState(),_=(0,s.f)(),f=o.useCallback(()=>{_("cx_storefront_login_modal_close"),t()},[t,_]),{authUser:g}=(0,i.A)(),h=o.useCallback(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;d(!0),_("cx_storefront_login_attempt_verify_with_code",{phoneNumber:r,code:e});try{var o,i,s;let a=await g(r,e);_("cx_storefront_login_attempt_success",{phoneNumber:r,code:e,userId:null==a?void 0:null===(s=a.data)||void 0===s?void 0:null===(i=s.authenticateStorefrontUser)||void 0===i?void 0:null===(o=i.userInfo)||void 0===o?void 0:o.id}),m(null),n&&n(),t()}catch(n){let t=(0,a.he)(n,!0);m(t),_("cx_storefront_login_attempt_error",{phoneNumber:r,code:e,parsedError:t.message,error:null==n?void 0:n.message})}d(!1)},[g,t,_,n]);return(0,r.jsx)(r.Fragment,{children:l({handleClose:f,handleAuthenticate:h,pending:u,error:c,setError:m})})}},249273:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(419393),o=n(651537),i=n(295052),s=n(898744),a=n(500057),l=n(111218),u=n(381509),d=n(969425),c=n(628026),m=n(439467),_=n(217151),f=n(392154),g=n(332959),h=e=>{let{firstName:t,lastName:n,setFirstName:o,setLastName:i}=e;return(0,r.jsxs)(g.Z,{"data-anchor-id":u.StorefrontAnchors.NameRow,children:[(0,r.jsx)(f.Z,{label:a.ZP.t("profilePageStrings_firstName"),onChange:e=>{(0,c.IV)(c.ul,e),o(e)},value:t,placeholder:a.ZP.t("menu_enterFirstName"),isRequired:!0}),(0,r.jsx)(f.Z,{label:a.ZP.t("profilePageStrings_lastName"),onChange:e=>{(0,c.IV)(c.ke,e),i(e)},value:n,placeholder:a.ZP.t("menu_enterLastName"),isRequired:!0})]})},p=e=>{let{currencyCode:t,email:n,firstName:f,lastName:g,phoneNumber:p="",setEmail:x,setFirstName:v,setLastName:b,setPhoneNumber:C}=e,[y,S]=s.useState((0,d.pt)(t));return(0,r.jsxs)(m.Z,{"data-anchor-id":u.StorefrontAnchors.ContactInfoPanel,size:_.Uo.large,children:[(0,r.jsx)(h,{firstName:f,lastName:g,setFirstName:v,setLastName:b}),!!C&&(0,r.jsx)(o.Z,{"data-anchor-id":u.StorefrontAnchors.Phone,availableCountries:Object.values(l.nR),value:p,onChange:(e,t)=>{var n,r;let o=(0,d.BH)(null!==(r=null==t?void 0:null===(n=t.number)||void 0===n?void 0:n.number)&&void 0!==r?r:e,y);(0,c.IV)(c.kk,o),C(o)},onCountryChange:e=>S(e),currentCountry:y,placeholder:(0,d.Yq)(y),label:a.ZP.t("profilePageStrings_phoneNumber"),isInternationalEnabled:!0,countryLabel:a.ZP.t("profilePageStrings_countries_country")}),(0,r.jsx)(i.Z,{"data-anchor-id":u.StorefrontAnchors.Email,label:a.ZP.t("profilePageStrings_email"),value:n,placeholder:a.ZP.t("menu_enterEmail"),onChange:e=>{x(e),(0,c.I4)(e)},isRequired:!0})]})}},495842:function(e,t,n){n.d(t,{Z:function(){return H}});var r=n(419393),o=n(19220),i=n(738979),s=n(305470),a=n(458261),l=n(708723),u=n(898744),d=n(500057),c=n(378740),m=n(325679),_=n(966101),f=n(537750),g=n(953604),h=n(532408),p=n(321845),x=n(628026),v=n(364534),b=e=>{let{createMode:t=!1,onSuccess:n=()=>0,onError:o=()=>0,phone:i="",isLoyaltySignUp:s,onClose:a,onBack:l,userAccountInfo:d}=e,[c,m]=u.useState(!1),[_,f]=u.useState(),b=(0,g.f)(),C=()=>{m(!0),b("cx_storefront_show_signup_verification_modal")},{sendOTP:y}=(0,h.V)(),{verifyAndRegister:S}=(0,p.P)(d);u.useEffect(()=>{C()}),u.useEffect(()=>{t||s||(b("cx_storefront_send_otp",{createMode:t}),i&&y(i),setTimeout(()=>m(!0),3e3))},[]);let P=u.useCallback(async e=>{b("cx_storefront_signup_atempted",{createMode:t});try{f(null),await S(e),b("cx_storefront_signup_success",{createMode:t}),n()}catch(n){let e=(0,x.he)(n);b("cx_storefront_signup_failure",{error:n.message,parsedError:e.message,createMode:t}),f(e)}},[b,t,S,n]);return(0,r.jsx)(u.Fragment,{children:c&&(0,r.jsx)(v.Z,{onSuccess:n,onPrimaryActionClick:P,onError:o,sendOTPOnLoad:t||s,isAutoOpened:!t||s,onClose:()=>{b("cx_storefront_hide_signup_verification_modal"),m(!1),a()},error:_?_.message:void 0,phone:i,showCloseButton:s,onBack:l})})},C=n(249273),y=n(153095),S=n(385710),P=n(337534),Z=n(977670),I=n(217151),j=n(327601),N=n(439467),w=n(19269),k=n(332959),E=n(637442),L=n(157890),T=n(426700),O=n(870056),U=n(354923),A=n(381509),B=n(839637),R=n(341045);let $=(0,n(488455).default)(P.x).attrs({textStyle:w.pn.title.medium}).withConfig({componentId:"sc-e3359d55-0"})(["font-size:20px;font-style:normal;letter-spacing:-0.01px;"]);var Q=n(739521),F=n(714815),D=n.n(F),z=n(390279),M=n(927510);let V=e=>{let{currency:t,distanceFromReward:n,rewardAmount:r,rewardThreshold:o,userLocale:i}=e,s={currency:t,userLocale:i,concise:!0};return{formattedRewardAmount:(0,M.formatMoney)({unitAmount:100*r,...s}),formattedRewardThreshold:(0,M.formatMoney)({unitAmount:100*o,...s}),formattedDistanceFromReward:(0,M.formatMoney)({unitAmount:100*n,...s})}};var G=e=>{var t,n,i;let{exitWizard:l,setShowEnjoyRewardsToTheFullestModal:c,isOpen:m}=e,{storeInformation:_}=(0,f.TX)(),{businessInformation:g}=u.useContext(T.Z),h=(0,B.UO)(),{distanceFromReward:p,progress:x,rewardAmount:v,rewardThreshold:b}=(0,R._4)(null==h?void 0:h.state),C=null!==(n=g.businessName||(null==_?void 0:_.name))&&void 0!==n?n:"",y=(0,j.bU)(),S=(0,Q.W)(),{formattedDistanceFromReward:Z,formattedRewardAmount:F,formattedRewardThreshold:M}=V({currency:D()(null!==(i=null==S?void 0:null===(t=S.defaultAddress)||void 0===t?void 0:t.countryCode)&&void 0!==i?i:z.E),distanceFromReward:p,rewardAmount:v,rewardThreshold:b,userLocale:y});return(0,r.jsx)(s.Z,{isOpen:m,onClose:()=>{l(!1),c(!1)},useHairlineDividers:!0,isFullScreenOnMobile:!0,size:a.C.medium,hasContentPadding:!0,title:d.ZP.t("benefitsStrings_rewards_subtitle",{provider:C}),children:(0,r.jsxs)(N.Z,{size:I.Uo.small,"data-testid":A.StorefrontAnchors.EnjoyRewardsToTheFullestBanner,children:[(0,r.jsx)(O.E,{isContentHorizontal:!1,title:d.ZP.t("storefront_youre_distance_away",{distanceFromReward:Z}),subtitle:d.ZP.t("storefront_reward_for_every",{rewardAmount:F,rewardThreshold:M}),progress:x,isMobile:!0}),(0,r.jsx)(U.LZ,{}),(0,r.jsx)($,{children:d.ZP.t("storefront_enjoy_rewards_to_the_fullest")}),(0,r.jsx)(P.x,{textStyle:w.pn.label.medium.default,children:d.ZP.t("storefront_complete_your_profile_to_view_and_redeem")}),(0,r.jsx)(o.Z,{onClick:()=>c(!1),children:d.ZP.t("storefront_complete_your_profile")}),(0,r.jsx)(U.LZ,{}),(0,r.jsx)($,{children:d.ZP.t("storefront_how_our_rewards_work")}),(0,r.jsxs)(P.x,{textStyle:w.pn.label.xSmall.default,children:[(0,r.jsxs)(k.Z,{children:[(0,r.jsx)(E.Z,{type:L.IconType.OrderBatchLine}),(0,r.jsx)(P.x,{children:d.ZP.t("storefront_place_multiple_orders_from",{rewardThreshold:b,restaurantName:C})})]}),(0,r.jsxs)(k.Z,{children:[(0,r.jsx)(E.Z,{type:L.IconType.RewardLine}),(0,r.jsx)(P.x,{children:d.ZP.t("storefront_once_a_reward_is")})]}),(0,r.jsxs)(k.Z,{children:[(0,r.jsx)(E.Z,{type:L.IconType.PriceTagClockLine}),(0,r.jsx)(P.x,{children:d.ZP.t("storefront_earned_rewards_must_be")})]}),d.ZP.t("storefront_cant_be_combined")]})]})})},H=e=>{var t,n,h,p;let{onClose:v,currencyCode:N,businessId:w,setShowSignIn:k,isLoyaltySignUp:E,onSignedUpSuccess:L}=e,{membershipInfo:T}=(0,_.G)(),[O,U]=u.useState(null!==(t=null==T?void 0:T.phoneNumber)&&void 0!==t?t:""),[A,B]=u.useState(null!==(n=null==T?void 0:T.firstName)&&void 0!==n?n:""),[R,$]=u.useState(null!==(h=null==T?void 0:T.lastName)&&void 0!==h?h:""),[Q,F]=u.useState(null!==(p=null==T?void 0:T.email)&&void 0!==p?p:""),[D,z]=u.useState(null!=E&&E),[M,V]=u.useState(!1),{storeInformation:H}=u.useContext(f.ZP),Y=(0,g.f)(),q=(0,j.bU)(),{title:X,subtitle:J}=(0,x.f0)();u.useEffect(()=>(0,x.TN)(!0,w)),u.useEffect(()=>{Y("cx_storefront_show_create_account_modal")},[]);let K=()=>{Y("cx_storefront_create_account_modal_click_sign_in"),k(!0),v()},W=!O||!A||!R||!(0,l.vV)(Q),{privacy:ee,terms:et}=(0,c.N9)({storeInformation:H,locale:q});return M?(0,r.jsx)(G,{isOpen:M,exitWizard:v,setShowEnjoyRewardsToTheFullestModal:V}):D?(0,r.jsx)(b,{phone:O,createMode:!(0,x.m$)(w),isLoyaltySignUp:E,onError:v,onSuccess:()=>{v(),(0,x.TN)(!1,w),L&&L()},onClose:v,onBack:()=>z(!1),userAccountInfo:{email:Q,first:A,last:R,phone:O}}):(0,r.jsxs)(s.Z,{isOpen:!D,onClose:v,useHairlineDividers:!0,isFullScreenOnMobile:!0,size:a.C.medium,primaryAction:{text:d.ZP.t("commonStrings_wizard_next"),onClick:()=>{Y("cx_storefront_create_account_modal_click_next"),z(!0)},buttonProps:{isDisabled:W}},hasContentPadding:!0,title:X,renderFooterContent:()=>(0,r.jsxs)(y.fG,{children:[(0,r.jsx)(y.Pm,{color:S.Q2.usage.color.text.subdued.default,children:d.ZP.t("storefront_signing_details")}),(0,r.jsx)(o.Z,{isInline:!0,type:i.L$.flatPrimary,padding:i.aV.none,onClick:K,children:d.ZP.t("storefront_signin_title")})]}),children:[(0,r.jsx)(P.x,{children:J}),(0,r.jsx)(Z.Z,{size:I.$f.small}),(0,r.jsx)(C.Z,{currencyCode:N,phoneNumber:O,firstName:A,lastName:R,email:Q,setPhoneNumber:U,setFirstName:B,setLastName:$,setEmail:F}),(0,r.jsx)(Z.Z,{size:I.$f.legacyMedium}),(0,r.jsxs)(P.x,{children:[d.ZP.t("menu_byCreatingAnAccountYou")," ",(0,r.jsx)(m.Dz,{href:et,target:"_blank",children:d.ZP.t("checkoutStrings_orderCart_terms")}),d.ZP.t("checkoutStrings_orderCart_and")," ",(0,r.jsx)(m.Dz,{href:ee,target:"_blank",children:d.ZP.t("checkoutStrings_orderCart_privacyStatement")})]})]})}},652328:function(e,t,n){var r=n(419393),o=n(307578),i=n(420119);n(898744);var s=n(500057),a=n(290199),l=n(217151),u=n(337534),d=n(19269),c=n(237879),m=n(153095);t.Z=e=>{let{title:t,onClick:n,hasCloseButton:_=!1}=e;return(0,r.jsxs)(a.Z,{children:[_||(0,r.jsx)(m.OQ,{size:l.$f.large,children:(0,r.jsx)(o.Z,{size:i.rm.small,iconType:i.L.ArrowLeft,accessibilityLabel:s.ZP.t("storefront_user_mgmt_go_back"),onClick:n})}),(0,r.jsx)(u.x,{textStyle:d.pn.display.medium,textAlign:c.H.left,children:t})]})}},832077:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(419393);n(898744);var o=n(738979),i=n(826893),s=n(305470),a=n(557153),l=n(652328),u=n(19220),d=n(500057),c=n(153095),m=n(385710),_=e=>{let{setShowSignUp:t}=e;return(0,r.jsxs)(c.fG,{children:[(0,r.jsx)(c.Pm,{color:m.Q2.usage.color.text.subdued.default,children:"".concat(d.ZP.t("menu_dontHaveAnAccount")," ")}),(0,r.jsx)(u.Z,{isInline:!0,type:o.L$.flatPrimary,padding:o.aV.none,onClick:t,children:d.ZP.t("landing_signUp")})]})},f=e=>{let{children:t,title:n="",buttonTitle:u,onClose:d=()=>0,onBack:c,onPrimaryActionClick:m=()=>0,hasCloseButton:f=!1,buttonDisabled:g=!1,isLoading:h=!1,showSignUpInFooter:p=!1,setShowSignUp:x=()=>0}=e;return(0,r.jsx)(s.Z,{isOpen:!0,"data-testid":"OtpModal",hasCloseButton:f,headerAlignment:a.sT.left,onClose:d,primaryAction:{text:u||"",onClick:m,buttonProps:{type:o.L$.primary,isInline:!0,isDisabled:g||h}},renderContentHeader:e=>{let{title:t}=e;return(0,r.jsx)(l.Z,{hasCloseButton:f,onClick:c||d,title:t})},renderFooterContent:p?()=>(0,r.jsx)(_,{setShowSignUp:x}):void 0,actionsFillContainer:!1,shouldStackButtons:!1,hasContentPadding:!1,shouldCloseOnEscapePress:!0,shouldCloseOnOverlayClick:!0,title:h?"":n,isFooterFixedPosition:!0,children:h?(0,r.jsx)(i.g,{}):t})}},364534:function(e,t,n){n.d(t,{z:function(){return S}});var r=n(419393),o=n(898744),i=n(19220),s=n(738979),a=n(420119),l=n(290199),u=n(439467),d=n(337534),c=n(977670),m=n(19269),_=n(500057),f=n(336255),g=n(953604),h=n(628026),p=n(532408),x=n(832077),v=n(674693),b=n(145476),C=n(272310),y=n(737702);let S=6;t.Z=e=>{let{onClose:t=()=>0,onBack:n,onPrimaryActionClick:P=()=>0,onSuccess:Z=()=>0,sendOTPOnLoad:I,isLoading:j=!1,showContinueAsGuest:N=!1,showUpdatePhoneNumberOption:w=!1,isAutoOpened:k,phone:E,error:L,showCloseButton:T,showSignUp:O,setShowSignUp:U}=e,A=null==E?void 0:E.slice(E.length-4),B=_.ZP.t("storefront_user_mgmt_enter_code_detail",{lastFour:A,passCodeLength:S}),R=_.ZP.t("storefront_auto_open_verify_modal_description_prefix"),$=_.ZP.t("storefront_resend_button_title"),Q=_.ZP.t("storefront_user_mgmt_passcode_label"),F=_.ZP.t("storefront_usermgmt_modal_title"),D=_.ZP.t("storefront_user_mgmt_modal_primary_button_title"),[z,M]=o.useState(""),[V,G]=o.useState(),{loyaltyUiDispatch:H}=(0,C.ex)(),Y=(0,g.f)(),{sendOTP:q,result:{loading:X}}=(0,p.V)(),J=_.ZP.t("storefront_checkout_continue_as_guest");o.useEffect(()=>{if(I){if(!E){G("Phone number not found. Make sure your account has a valid phone number before logging in.");return}Y("cx_storefront_send_otp",{sendOTPOnLoad:I}),q(E).then(()=>{Y("cx_storefront_send_otp_success",{sendOTPOnLoad:I})}).catch(e=>{Y("cx_storefront_send_otp_error",{sendOTPOnLoad:I,error:e.message,parsedError:(0,h.he)(e).message})}),G("")}},[]);let K=async()=>{try{G(""),M(""),Y("track_click_otp_resend_code"),Y("cx_storefront_send_otp"),await q(E),Y("cx_storefront_send_otp_success")}catch(t){let e=(0,h.he)(t);q(E).catch(t=>{Y("cx_storefront_send_otp_error",{error:t.message,parsedError:e.message})}),G(e.message)}},W=z.length===S&&!z.includes(" ");return o.useEffect(()=>{W&&z&&(Y("cx_storefront_auto_submit_code"),Y("track_click_otp_confirm"),P(z,E),M(""))},[W,z,P,Y,E]),(0,r.jsx)(x.Z,{title:F,buttonTitle:D,onClose:t,onBack:n,onSuccess:()=>{Z(),t(),(0,h.TN)(!1)},onPrimaryActionClick:()=>P(z,E),buttonDisabled:!W,isLoading:j,hasCloseButton:T,showSignUpInFooter:O,setShowSignUp:U,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(d.x,{children:k?"".concat(R," ").concat(B):B}),(0,r.jsx)(f.Z,{label:Q,value:z,numChars:S,onChange:e=>M(e.trim()),hasError:!!L||!!V,errorMessage:L||V}),(0,r.jsx)(c.Z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Z,{"data-testid":"otp-resend-button",type:s.L$.flatPrimary,isInline:!0,state:X?s.BN.loading:s.BN.default,padding:s.aV.none,onClick:K,children:(0,r.jsx)(d.x,{color:m.d9.action.primary.default,children:$})}),w&&(0,r.jsx)("div",{children:(0,r.jsx)(i.Z,{type:s.L$.link,isInline:!0,size:a.qE.small,onClick:()=>{H({type:C.lj.PHONE_ERROR,payload:C.Vs.Update}),t()},children:(0,r.jsx)(d.x,{textStyle:m.pn.label.small.default,color:m.d9.text.subdued.default,children:"Didnâ€™t receive a code?"})})}),N&&(0,r.jsx)("div",{children:(0,r.jsx)(i.Z,{type:s.L$.link,isInline:!0,onClick:()=>{Y("track_click_otp_continue_as_guest"),Y("cx_storefront_continue_as_guest"),(0,h.o5)(h.hB),(0,y.pC)(h.hB,"",-1,!0),t()},size:a.qE.small,children:(0,r.jsx)(d.x,{textStyle:m.pn.label.small.default,color:m.d9.text.subdued.default,children:J})})})]})})]})}),(0,r.jsx)(v.Z,{type:b.C.fullBorder})]})})}},380905:function(e,t,n){n.d(t,{A:function(){return m}});var r=n(847881),o=n(98276),i=n(755928),s=n(898744),a=n(826695),l=n(808959),u=n(537750);function d(){let e=(0,r._)(["\n  mutation authUser(\n    $phone: String!\n    $code: String!\n    $businessId: Int!\n    $loyaltyProgramId: String\n  ) {\n    authenticateStorefrontUser(\n      businessId: $businessId\n      phone: $phone\n      code: $code\n      loyaltyProgramId: $loyaltyProgramId\n    ) {\n      userInfo {\n        id\n      }\n    }\n  }\n"]);return d=function(){return e},e}let c=(0,i.gql)(d()),m=()=>{let[e,t]=(0,o.D)(c),{isLoading:n,storeInformation:r}=s.useContext(u.ZP),{programId:i}=(0,a.ZP)(),{programId:d}=(0,l.Z)(),m=i||d,{businessId:_}=r,f=s.useCallback((t,n)=>e({variables:{phone:t,code:n,loyaltyProgramId:m,businessId:parseInt(_||"0",10)},refetchQueries:["consumer","checkout","paymentMethodQuery","menu"],awaitRefetchQueries:!1}).then(async e=>{var t;if(null==e?void 0:null===(t=e.errors)||void 0===t?void 0:t.length)throw Error(null==e?void 0:e.errors[0].message);return e}),[e,_,m]);return n?{result:t,authUser:()=>Promise.reject(0)}:{authUser:f,result:t}}},532408:function(e,t,n){n.d(t,{V:function(){return c}});var r=n(847881),o=n(755928),i=n(98276),s=n(537750),a=n(898744),l=n(80291);function u(){let e=(0,r._)(["\n  mutation sendOTPForStorefrontUser($phone: String!, $businessId: Int!) {\n    sendOTPForStorefrontUser(phone: $phone, businessId: $businessId)\n  }\n"]);return u=function(){return e},e}let d=(0,o.gql)(u()),c=()=>{let[e,t]=(0,i.D)(d),{loading:n,consumer:r}=(0,l.R)(),{isLoading:o,storeInformation:u}=a.useContext(s.ZP),{businessId:c}=u,{phoneNumber:m}=r,_=a.useCallback(t=>e({variables:{phone:t||m,businessId:parseInt(c||"0",10)}}).then(e=>{var t;if(null==e?void 0:null===(t=e.errors)||void 0===t?void 0:t.length)throw Error(null==e?void 0:e.errors[0].message);return e}),[e,c,m]);return o||n?{sendOTP:()=>Promise.reject(0),result:t}:{sendOTP:_,result:t}}},321845:function(e,t,n){n.d(t,{P:function(){return p}});var r=n(847881),o=n(98276),i=n(755928),s=n(898744),a=n(301519),l=n(826695),u=n(808959),d=n(537750);function c(){let e=(0,r._)(["\n  mutation convertLiteGuestToFullGuest($storeId: String!) {\n    convertStorefrontLiteGuestToFullGuest(storeId: $storeId)\n  }\n"]);return c=function(){return e},e}let m=(0,i.gql)(c()),_=()=>{let[e,t]=(0,o.D)(m),{isLoading:n,storeInformation:r}=s.useContext(d.ZP),{storeId:i}=r,a=s.useCallback(()=>e({variables:{storeId:(null==i?void 0:i.toString())||""},refetchQueries:["consumer"]}).then(e=>{var t;if(null==e?void 0:null===(t=e.errors)||void 0===t?void 0:t.length)throw Error(null==e?void 0:e.errors[0].message);return e}),[e,i]);return n?{convertGuest:()=>Promise.reject(0),result:t}:{convertGuest:a,result:t}};var f=n(953604);function g(){let e=(0,r._)(["\n  mutation createUser(\n    $businessId: Int!\n    $email: String!\n    $first: String!\n    $last: String!\n    $phone: String!\n    $code: String!\n    $storeId: String!\n    $loyaltyProgramId: String\n  ) {\n    createStorefrontUser(\n      businessId: $businessId\n      email: $email\n      first: $first\n      last: $last\n      phone: $phone\n      code: $code\n      storeId: $storeId\n      loyaltyProgramId: $loyaltyProgramId\n    ) {\n      token {\n        refreshToken\n      }\n      userInfo {\n        id\n        firstName\n        lastName\n        isActive\n      }\n    }\n  }\n"]);return g=function(){return e},e}let h=(0,i.gql)(g()),p=e=>{let[t,n]=(0,o.D)(h),{isLoading:r,storeInformation:i}=s.useContext(d.ZP),c=(0,f.f)(),m=(0,a.Hi)(),{convertGuest:g}=_(),{businessId:p,storeId:x}=i,{phone:v,first:b,last:C,email:y}=e,{programId:S,isLoyalty:P}=(0,l.ZP)(),{programId:Z}=(0,u.Z)(),I=""===S&&P?Z:S,j=s.useCallback(e=>g().then(()=>m({variables:{email:y,firstName:b,lastName:C,phoneNumber:v}})).then(()=>{let n={phone:v,last:C,first:b,email:y,code:e,storeId:x,loyaltyProgramId:I,businessId:parseInt(p||"0",10)};return(!y||y&&y.includes("@guest.doordash.com"))&&c("track_missing_or_incorrect_email",{email:y}),t({variables:n,refetchQueries:["consumer","menu"]}).then(e=>{var t;if(null==e?void 0:null===(t=e.errors)||void 0===t?void 0:t.length)throw c("track_verify_and_register_user_error",{error:null==e?void 0:e.errors[0].message}),Error(null==e?void 0:e.errors[0].message);return e})}),[v,C,b,y,p,x,t,m]);return r?{verifyAndRegister:()=>Promise.reject(0),result:n}:{verifyAndRegister:j,result:n}}},153095:function(e,t,n){n.d(t,{Af:function(){return Z},Nw:function(){return v},OQ:function(){return b},PD:function(){return I},Pm:function(){return y},V6:function(){return w},a1:function(){return P},cU:function(){return k},fG:function(){return C},i$:function(){return x},lb:function(){return j},t5:function(){return N},xx:function(){return S}});var r=n(847881),o=n(865475),i=n(290199),s=n(385710),a=n(991311),l=n(439467),u=n(19269),d=n(977670),c=n(332959),m=n(337534),_=n(637442),f=n(237879),g=n(488455);function h(){let e=(0,r._)(["\n      border-radius: 0;\n    "]);return h=function(){return e},e}function p(){let e=(0,r._)(["\n  max-width: 100%;\n  "]);return p=function(){return e},e}(0,g.default)(i.Z).withConfig({componentId:"sc-69dc43e8-0"})(["margin-top:",";background-color:",";border-radius:",";",""],s.Q2.usage.space.legacyMedium,s.Q2.usage.color.background.subdued.default,s.Q2.usage.space.xSmall,a.pU.mobile(h())),g.default.label.withConfig({componentId:"sc-69dc43e8-1"})(["margin-left:"," !important;"],s.Q2.usage.space.small),(0,g.default)(l.Z).withConfig({componentId:"sc-69dc43e8-2"})(["max-width:600px;",""],a.pU.mobile(p())),g.default.div.withConfig({componentId:"sc-69dc43e8-3"})(["display:flex;justify-content:center;"]),g.default.div.withConfig({componentId:"sc-69dc43e8-4"})(["padding-left:",";padding-right:",";padding-bottom:",";"],s.Q2.usage.space.xxxLarge,s.Q2.usage.space.xxxLarge,s.Q2.usage.space.large);let x=g.default.div.withConfig({componentId:"sc-69dc43e8-5"})(["width:calc("," - ",");height:calc("," - ",");padding:",";background-color:",";border:"," solid ",";:focus-within{border:none;outline:none;box-shadow:",";}border-radius:",";display:inline-flex;justify-content:center;align-items:center;"],s.Q2.usage.space.xxxLarge,s.Q2.usage.space.xSmall,s.Q2.usage.space.xxxLarge,s.Q2.usage.space.xSmall,s.Q2.usage.space.xxxSmall,e=>{let{hasError:t}=e;return t?o.i2.SystemRed5:s.Q2.usage.color.background.subdued.default},s.Q2.usage.space.xxxSmall,e=>{let{hasError:t}=e;return t?s.Q2.usage.color.negative.strong.default:s.Q2.usage.color.border.default},e=>{let{hasError:t}=e;return"".concat(s.Q2.usage.space.none," ").concat(s.Q2.usage.space.none," ").concat(s.Q2.usage.space.none," ").concat(s.Q2.usage.space.xxxSmall," ").concat(t?s.Q2.usage.color.negative.strong.default:s.Q2.usage.color.text.default)},s.Q2.usage.space.xSmall);g.default.div.withConfig({componentId:"sc-69dc43e8-6"})(["display:inline-block;margin-left:",";"],s.Q2.usage.space.xxSmall);let v=g.default.input.withConfig({componentId:"sc-69dc43e8-7"})(["height:",";width:",";line-height:",";background-color:",";font-size:","px;text-align:center;outline:none;border:none;-moz-appearance:textfield;::-webkit-outer-spin-button,::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}"],s.Q2.usage.space.xLarge,s.Q2.usage.space.xLarge,s.Q2.usage.space.xLarge,e=>{let{hasError:t}=e;return t?o.i2.SystemRed5:s.Q2.usage.color.background.subdued.default},u.pn.label.medium.default.size),b=(0,g.default)(d.Z).withConfig({componentId:"sc-69dc43e8-8"})(["margin-left:calc(-1 * ",");"],s.Q2.usage.space.xSmall);g.default.div.withConfig({componentId:"sc-69dc43e8-9"})(["background-color:",";border-radius:",";"],s.Q2.usage.color.positive.subdued.default,s.Q2.usage.space.xSmall),g.default.div.withConfig({componentId:"sc-69dc43e8-10"})(["margin-left:calc(-1 * ",");"],s.Q2.usage.space.medium),(0,g.default)(i.Z).withConfig({componentId:"sc-69dc43e8-11"})(["flex-grow:1;margin:"," "," "," 0;"],s.Q2.usage.space.medium,s.Q2.usage.space.medium,s.Q2.usage.space.medium);let C=(0,g.default)(c.Z).withConfig({componentId:"sc-69dc43e8-12"})(["width:100%;display:flex;align-items:center;"]),y=(0,g.default)(m.x).withConfig({componentId:"sc-69dc43e8-13"})(["margin-right:calc(-1 * ",");"],s.Q2.usage.space.small),S=(0,g.default)(c.Z).withConfig({componentId:"sc-69dc43e8-14"})(["justify-content:space-between;width:100%;border-bottom:",";padding:"," ",";"],e=>e.isLast?"":"1px solid ".concat(s.Q2.usage.color.border.default),s.Q2.usage.space.medium,s.Q2.usage.space.none),P=g.default.div.withConfig({componentId:"sc-69dc43e8-15"})(["padding-top:",";"],s.Q2.usage.space.medium),Z=g.default.div.withConfig({componentId:"sc-69dc43e8-16"})(["padding-right:",";cursor:pointer;"],s.Q2.usage.space.large),I=(0,g.default)(c.Z).withConfig({componentId:"sc-69dc43e8-17"})(["cursor:pointer;"]),j=(0,g.default)(m.x).attrs(()=>({textStyle:u.pn.body.medium.default})).withConfig({componentId:"sc-69dc43e8-18"})(["margin-top:"," !important;"],s.Q2.usage.space.none),N=g.default.div.withConfig({componentId:"sc-69dc43e8-19"})(["padding-left:",";"],s.Q2.usage.space.medium);g.default.div.withConfig({componentId:"sc-69dc43e8-20"})(["width:100%;display:flex;align-items:center;"]),(0,g.default)(m.x).attrs(()=>({textStyle:s.Q2.usage.type.title.medium})).withConfig({componentId:"sc-69dc43e8-21"})(["text-decoration:underline;cursor:pointer;"]),g.default.div.withConfig({componentId:"sc-69dc43e8-22"})(["padding-top:",";"],s.Q2.usage.space.legacyMedium),(0,g.default)(_.Z).withConfig({componentId:"sc-69dc43e8-23"})(["height:",";"],s.Q2.usage.space.legacyMedium),g.default.div.withConfig({componentId:"sc-69dc43e8-24"})(["button > div > div:nth-of-type(2){display:flex;flex-flow:row;align-items:center;}"]),g.default.div.withConfig({componentId:"sc-69dc43e8-25"})(["padding-bottom:8px;"]),(0,g.default)(m.x).attrs(()=>({textStyle:u.pn.body.small.default,color:u.d9.text.subdued.default,textAlign:f.H.center})).withConfig({componentId:"sc-69dc43e8-26"})(["padding-top:8px;"]);let w=g.default.div.withConfig({componentId:"sc-69dc43e8-27"})(["display:flex;flex-direction:column;gap:",";width:100%;flex-grow:1;"],s.Q2.usage.space.medium),k=g.default.div.withConfig({componentId:"sc-69dc43e8-28"})(["border-bottom:thin solid ",";"],s.Q2.usage.color.border.default)},969425:function(e,t,n){n.d(t,{BH:function(){return u},Yq:function(){return a},pt:function(){return l},ss:function(){return s}});var r=n(708723),o=n(793312),i=n.n(o);n(628026);let s="US",a=e=>{let t={AU:"xxxx xxx xxx",CA:"(xxx) xxx-xxxx",US:"(xxx) xxx-xxxx",MX:"xxx xxxx xxx",JP:"xxx-xxxx-xxxx"};return t[e]||t.US},l=e=>"USD"===e?s:i()((0,r.ih)("currencyCode"))[e]||s,u=(e,t)=>{let n={JP:"+810"===e.substring(0,4)?e.substring(0,3)+e.substring(4):e};return t in n?n[t]:e}}}]);